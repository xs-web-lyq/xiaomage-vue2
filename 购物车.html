<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            border: 1px solid #000;
            border-collapse:collapse;
            border-spacing: 0;
        }
        th,td {
            border: 1px solid #000;
            text-align: left;
        }
        th {
            width:80px;
        }

    </style>
</head>
<body>
    <div class="box">
        <table v-show="goods.length != 0">
            <thead>
                <tr>
                    <th></th>
                    <th>书籍名称</th>
                    <th>价格</th>
                    <th>数量</th>
                    <th>操作</th></th>
                </tr>

            </thead>
            <tbody>
                <tr v-for="(index,item) in goods">
                    <td>{{item.id}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.price | showPrice}}</td>
                    <td>
                        <button @click="minus(index)" :disable="item.count <= 1;">-</button>
                        {{item.count}}
                        <button @click="add(index)">+</button>
                    </td>
                    <td><button @click="deleted(index)">删除</button></td>
                </tr>
            </tbody>
        </table>
        <h3 v-show="goods.length != 0">总价格：{{sum | showPrice}}</h3>
        <h2 v-show="goods.length == 0">购物车为空...</h2>
    </div>
    <script src="vue.js"></script>
    <script>
        new Vue({
            el:'.box',
            data:{
                goods:[
                    {
                        id:1,
                        name:'西游记',
                        price:198,
                        count:1
                    },                    {
                        id:2,
                        name:'西游记',
                        price:100,
                        count:1
                    },
                    {
                        id:3,
                        name:'西游记',
                        price:88,
                        count:1
                    },                    {
                        id:4,
                        name:'西游记',
                        price:66,
                        count:1
                    }
                ]
            },
            methods:{
                // getFinalPrice(number){
                //     return `￥ ${number.toFixed(2)}`
                // },
                minus(index){
                    if(this.goods[index].count > 1){
                        this.goods[index].count--;
                    }
                },
                add(index){
                    this.goods[index].count++;
                },
                deleted(index){
                    this.goods.splice(index,1)
                    if(this.goods.length == 0){

                    }
                }
            },
            filters:{
                showPrice(price){
                    return `￥ ${price.toFixed(2)}`
                }
            },
            computed:{
                sum(){
                    let sum = 0 ;
                    for(let item of this.goods){
                        sum += item.count * item.price;
                    }
                    // for(letkey in this.goods){
                    //     console.log(key);
                    // }
                    return sum;
                }
            }
        })
    </script>
    
</body>
</html>